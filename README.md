# Моделирование движения на автостраде

Визуализация классического этюда для программиста - симуляция транспортного потока на автостраде.

## Описание

Приложение моделирует движение автомобилей на прямом участке автострады длиной 5 км. Реализована физика взаимодействия автомобилей: торможение при сближении, ускорение, соблюдение безопасной дистанции.

### Особенности симуляции

- **Длина дороги**: 5000 метров (5 км)
- **Диапазон скоростей**: настраиваемый (по умолчанию 50-80 км/ч)
- **Безопасная дистанция**: вычисляется динамически в зависимости от разницы скоростей
- **Торможение**: автоматическое при критическом сближении
- **Ускорение**: до целевой скорости при наличии свободного пространства
- **Real-time визуализация**: через WebSocket

## Требования

- Go 1.16 или выше
- Современный веб-браузер

## Установка и запуск

### 1. Клонирование/Переход в каталог

```bash
cd D:\Projects\Drive
```

### 2. Установка зависимостей

```bash
go mod download
```

### 3. Запуск приложения

```bash
go run main.go
```

Сервер запустится на `http://localhost:8080`

### 4. Альтернативный запуск (компиляция)

```bash
go build -o drive-simulation.exe
./drive-simulation.exe
```

## Использование

1. Откройте браузер и перейдите на `http://localhost:8080`
2. Используйте панель управления слева для настройки параметров:
   - **Интервал создания машин** (0.5-5 сек) - частота появления новых автомобилей
   - **Мин. скорость** (30-80 км/ч) - минимальная начальная скорость
   - **Макс. скорость** (50-120 км/ч) - максимальная начальная скорость
3. Нажмите **Старт** для запуска симуляции
4. Наблюдайте за движением автомобилей на визуализации
5. Используйте **Стоп** для паузы и **Сброс** для начала заново

## Визуализация

### Цвета автомобилей

- **Разноцветные** - нормальное движение
- **Красный** - торможение
- **Зеленый** - ускорение

### Индикаторы

- **Скорость** - отображается над каждым автомобилем (км/ч)
- **Торможения** - красный значок с числом показывает количество торможений (⚠N)

### Статистика

Панель управления отображает:
- Время симуляции (секунды)
- Количество машин на дороге
- Всего создано машин
- Машин, прошедших дорогу

## Технические детали

### Физика движения

- **Безопасная дистанция**: вычисляется по формуле, основанной на разнице скоростей, с коэффициентом безопасности 3.0
- **Торможение**: ускорение торможения составляет 6.67 м/с² (≈15 миль/ч за секунду)
- **Время реакции**: 0.2 секунды задержка перед торможением
- **Ускорение**: 2.0 м/с² при свободной дороге

### Архитектура

- **Backend**: Go с использованием gorilla/websocket
- **Frontend**: Чистый HTML/CSS/JavaScript с Canvas API
- **Коммуникация**: WebSocket для real-time обновлений (50ms интервал)
- **Параллелизм**: goroutines для симуляции и broadcast

## Структура проекта

```
D:\Projects\Drive\
├── main.go           # Основная логика симуляции и веб-сервер
├── index.html        # Веб-интерфейс с визуализацией
├── go.mod            # Go модуль
├── go.sum            # Контрольные суммы зависимостей
└── README.md         # Документация
```

## Зависимости

- `github.com/gorilla/websocket` - для WebSocket коммуникации

## Возможные улучшения

- Добавление нескольких полос движения
- Реализация обгонов
- Добавление генератора возмущений (случайные торможения)
- Экспорт статистики в CSV/JSON
- Графики изменения скоростей во времени
- Настройка параметров физики (безопасная дистанция, торможение)

## Лицензия

Свободное использование в образовательных целях.

## Автор

Основано на классическом этюде "Моделирование движения на автостраде" из книги по программированию.
